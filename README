#
## Dependences
#

Rake



#
## How to use
#

First, please [git clone THIS_APP].
Second, [cd THIS_APP_DIR], and type [rake].



#
## COMMANDS
#

# Start Twitter Receiving Server
# - Process: "stream_server" will start
application:start(twitter).

# Lunch our application monitering GUI (can stop, watch using resources)
appmon:start().

# Lunch process monitor
pman:start().

# Output stream in a target
stream_server:request_stream(raw | couchdb, filtering_word_can_utf8).



#
## Test
#

application:start(twitter).
stream_server:request_stream(couchdb, ["Twitter"]).



#
## Example: Keyword Saver
#
-module(keyword_saver).
-vsn(1.01).
-author('Yuki Nitta <yuki@nit2a.com>').

-export([start_save/0]).
-export([init/1]).

-behavior(supervisor).

-define(SEARCH_KEYWORDS, unilib:utf8binary_to_list(unilib:utf8_to_binary([
	"UTF8_keyword01",
	"UTF8_keyword02",
	"UTF8_keyword03",
	"UTF8_keyword04",
	"UTF8_keyword05"
]))).



start_save() ->
	application:start(twitter),
	supervisor:start_link({local, ?MODULE}, ?MODULE, []).

init(_Args) ->
	UsrChildren = [
		{
			request_stream,
			{stream_server, request_stream, [couchdb, ?SEARCH_KEYWORDS]},
			temporary,
			1000,
			worker,
			dynamic
		}
	],
	{ok, {{one_for_one, 2, 60}, UsrChildren}}.
